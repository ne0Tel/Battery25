{% extends "templates/base.html" %}
{% load static %}

{% block content %}

<section class="car-card">

  <div class="row g-0">

    
    <div class="col-md-6 col-sm-12">
      <div class="gallery">
        <div class="main-slides">
          {% for car in korea %}
    
          <img
            src="/media/{{car.img.all.0}}"
            alt="{{ car.brand }} {{ car.model }}"
            class="gallery-slide slide-{{ forloop.counter0 }} gallery__Image" 
            data-large="{{photo}}"
            style="cursor: pointer;"
          />
    
          {% endfor %}

          <p class="slides-counter">
            <span class="curr-slide-count">0</span> /
            <span class="all-slides-count">8</span>
          </p>
    
          <div class="previous-slide-button slider-controller-button">
            <i class="fa fa-arrow-left" aria-hidden="true"></i>
          </div>
          <div class="next-slide-button slider-controller-button">
            <i class="fa fa-arrow-right" aria-hidden="true"></i>
          </div>
        </div>
        <div class="thumbnail-slides"></div>
      </div>
    </div>

    <style>
      .asyncGallery {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        opacity: 0;
        z-index: 11111;
        visibility: hidden;
        background-color: rgba(0, 0, 0, 0.84);
        transition: opacity 200ms, visibility 200ms;
      }
      
      .asyncGallery.is-visible {
        opacity: 1;
        visibility: visible;
      }
      
      .asyncGallery__Item {
        position: absolute;
        top: 50%;
        left: 50%;
        opacity: 0;
        visibility: hidden;
        overflow: hidden;
        transform: translate(-50%, -50%);
        transition: opacity 200ms, visibility 200ms;
      }
      
      .asyncGallery__Item.is-visible {
        opacity: 1;
        visibility: visible;
      }
      
      .asyncGallery__ItemImage img {
        max-height: 80vh;
        display: block;
      }
      
      .asyncGallery__ItemDescription,
      .asyncGallery__Loader {
        color: #fff;
      }
      
      .asyncGallery__Loader {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        display: none;
        color: #fff;
        z-index: 100;
      }
      
      .asyncGallery__Loader.is-visible {
        display: block;
      }
      
      .asyncGallery button {
        background-color: transparent;
        border: 0;
        outline: 0;
        padding: 0;
        font-size: 0;
        cursor: pointer;
      }
      
      .asyncGallery__Close {
        position: absolute;
        top: 40px;
        right: 40px;
        width: 30px;
        height: 30px;
        z-index: 1000;
        background-repeat: no-repeat;
        background-size: 30px 30px;
        background-image: url("data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNTEycHgiIHZlcnNpb249IjEuMSIgaGVpZ2h0PSI1MTJweCIgdmlld0JveD0iMCAwIDY0IDY0IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2NCA2NCI+CiAgPGc+CiAgICA8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMjguOTQxLDMxLjc4NkwwLjYxMyw2MC4xMTRjLTAuNzg3LDAuNzg3LTAuNzg3LDIuMDYyLDAsMi44NDljMC4zOTMsMC4zOTQsMC45MDksMC41OSwxLjQyNCwwLjU5ICAgYzAuNTE2LDAsMS4wMzEtMC4xOTYsMS40MjQtMC41OWwyOC41NDEtMjguNTQxbDI4LjU0MSwyOC41NDFjMC4zOTQsMC4zOTQsMC45MDksMC41OSwxLjQyNCwwLjU5YzAuNTE1LDAsMS4wMzEtMC4xOTYsMS40MjQtMC41OSAgIGMwLjc4Ny0wLjc4NywwLjc4Ny0yLjA2MiwwLTIuODQ5TDM1LjA2NCwzMS43ODZMNjMuNDEsMy40MzhjMC43ODctMC43ODcsMC43ODctMi4wNjIsMC0yLjg0OWMtMC43ODctMC43ODYtMi4wNjItMC43ODYtMi44NDgsMCAgIEwzMi4wMDMsMjkuMTVMMy40NDEsMC41OWMtMC43ODctMC43ODYtMi4wNjEtMC43ODYtMi44NDgsMGMtMC43ODcsMC43ODctMC43ODcsMi4wNjIsMCwyLjg0OUwyOC45NDEsMzEuNzg2eiIvPgogIDwvZz4KPC9zdmc+Cg==");
      }
      
      .asyncGallery__Counter {
        position: absolute;
        font-size: 20px;
        font-weight: bold;
        color: #fff;
        right: 40px;
        bottom: 40px;
      }
      
      .asyncGallery__Dots {
        position: absolute;
        left: 50%;
        bottom: 40px;
        display: flex;
        margin: 0;
        padding: 0;
        transform: translateX(-50%);
        list-style-type: none;
        z-index: 1000;
      }
      
      .asyncGallery__Dots button {
        padding: 0;
        width: 10px;
        height: 10px;
        background-color: #fff;
        border: 0;
        outline: 0;
        border-radius: 50%;
      }
      
      .asyncGallery__Dots li {
        opacity: 0.2;
        transition: opacity 200ms;
      }
      
      .asyncGallery__Dots li + li {
        margin-left: 10px;
      }
      
      .asyncGallery__Dots li.is-active {
        opacity: 1;
      }
      
      .asyncGallery__Next,
      .asyncGallery__Prev {
        position: absolute;
        top: 50%;
        width: 30px;
        height: 30px;
        z-index: 1000;
        transition: transform 200ms, opacity 200ms;
        transform: translateY(-50%);
      }
      
      .asyncGallery__Next:disabled,
      .asyncGallery__Prev:disabled {
        opacity: 0.2;
        cursor: default;
      }
      
      .asyncGallery__Next:before,
      .asyncGallery__Prev:before {
        position: absolute;
        content: "";
        top: 50%;
        left: 50%;
        background-image: url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 129 129' xmlns:xlink='http://www.w3.org/1999/xlink' enable-background='new 0 0 129 129'%3E%3Cg%3E%3Cpath d='m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E%0A");
        width: 30px;
        height: 30px;
        background-repeat: no-repeat;
        background-size: 30px 30px;
      }
      
      .asyncGallery__Next {
        right: 40px;
      }
      
      .asyncGallery__Next:hover {
        transform: translateX(2px) translateY(-50%);
      }
      
      .asyncGallery__Next:before {
        transform: translate3d(-50%, -50%, 0);
      }
      
      .asyncGallery__Prev {
        left: 40px;
      }
      
      .asyncGallery__Prev:hover {
        transform: translateX(-2px) translateY(-50%);
      }
      
      .asyncGallery__Prev:before {
        transform: translate3d(-50%, -50%, 0) scale(-1);
      }
      
      /* DEMO */
      
      @media screen and (max-width: 768px) {
        .asyncGallery__Close {
          top: 15px;
          right: 15px;
          width: 20px;
          height: 20px;
          background-size: 20px;
        }
      
        .asyncGallery__Dots {
          bottom: 15px;
        }
      
        .asyncGallery__Counter {
          right: 15px;
          bottom: 15px;
          font-size: 12px;
        }
      
        .asyncGallery__Item {
          width: 100%;
        }
      
        .asyncGallery__ItemImage img {
          max-height: none;
          max-width: 100%;
        }
      
        .asyncGallery__ItemDescription {
          padding: 0 20px;
        }
      
        .asyncGallery__Next,
        .asyncGallery__Prev {
          display: none;
        }
      }
      

      .main-slides {
        display: flex;
        flex-direction: column;
        flex-wrap: nowrap;
        justify-content: center;
        align-items: center;
        position: relative;
        overflow: hidden;
      }
    
      .main-slides img {
        width: 100%;
        border-radius: 16px;
        transition: all 0.3s ease-out 0s;
      }
    
      .main-slides > .gallery-slide {
        display: none;
      }
    
      .main-slides > .gallery-slide:nth-child(1) {
        display: block;
      }
    
      .previous-slide-button,
      .next-slide-button,
      .slides-counter {
        display: none !important;
      }
    
      .thumbnail-slides {
        margin-top: 8px;
        padding: 8px;
        text-align: left;
      }
    
      .thumbnail-slides > img {
        width: 100px;
        height: 80px;
        cursor: pointer;
        margin-right: 1px;
        margin-left: 1px;
        padding: 3px;
        transition: all 0.3s ease-out 0s;
        border-radius: 12px;
      }
    
      .thumbnail-slides > img:hover {
        transform: scale(1.1, 1.1);
      }
    
      .car-promotion {
        font-size: 16px;
        font-weight: 400;
        color: #757575;
        margin-bottom: 0px;
      }
    
      @media (max-width: 767px) {
        .car-promotion {
          margin-bottom: 24px;
        }
      }
    </style>
      
    <script>
      class AsyncGallery {
        constructor(settings) {
          this.settings = {
            images: ".gallery__Image",
            loop: true,
            next: undefined,
            prev: undefined,
            dots: undefined,
            close: undefined,
            loader: undefined,
            counter: undefined,
            counterDivider: "/",
            keyboardNavigation: true,
            hiddenElements: []
          };
      
          Object.assign(this.settings, settings);
      
          this.gallery = null;
          this.index = 0;
          this.items = [...document.querySelectorAll(this.settings.images)];
      
          this.addedItems = {};
      
          this.touch = {
            endX: 0,
            startX: 0
          };
      
          this.init();
        }
      
        get loading() {
          return !this.settings.hiddenElements.includes("loader");
        }
      
        get dotsVisible() {
          return !this.settings.hiddenElements.includes("dots");
        }
      
        init() {
          this.clearUncomplete();
          this.createElements();
          this.bindEvents();
        }
      
        clearUncomplete() {
          this.items = this.items.filter(item => {
            return item.dataset.large;
          });
        }
      
        createElements() {
          this.gallery = document.createElement("DIV");
          this.gallery.classList.add("asyncGallery");
      
          this.createSingleElement({
            element: "prev",
            type: "BUTTON",
            event: "click",
            func: this.getPrevious
          });
      
          this.createSingleElement({
            element: "next",
            type: "BUTTON",
            event: "click",
            func: this.getNext
          });
      
          this.createSingleElement({
            element: "close",
            type: "BUTTON",
            event: "click",
            func: this.closeGallery
          });
      
          this.createSingleElement({
            element: "loader",
            type: "SPAN",
            text: "Loading..."
          });
      
          this.createSingleElement({
            element: "counter",
            type: "SPAN",
            text: "0/0"
          });
      
          this.createSingleElement({
            element: "dots",
            type: "UL",
            text: ""
          });
      
          if (!this.settings.hiddenElements.includes("dots")) {
            this.items.forEach((item, i) => {
              let dot = document.createElement("LI");
              dot.dataset.index = i;
              let button = document.createElement("BUTTON");
              button.innerHTML = i;
              button.addEventListener("click", () => {
                this.index = i;
                this.getItem(i);
              });
      
              dot.append(button);
              this.dots.append(dot);
            });
          }
      
          window.document.body.append(this.gallery);
        }
      
        createSingleElement({ element, type, event = "click", func, text }) {
          if (!this.settings.hiddenElements.includes(element)) {
            if (!this.settings[element]) {
              this[element] = document.createElement(type);
              this[element].classList.add(
                `asyncGallery__${this.capitalizeFirstLetter(element)}`
              );
              this[element].innerHTML = text !== undefined ? text : element;
              this.gallery.append(this[element]);
            } else {
              this[element] = document.querySelector(this.settings[element]);
              this.gallery.append(this[element]);
            }
      
            if (func) {
              this[element].addEventListener(event, func.bind(this));
            }
          }
        }
      
        getItem(i, content = null) {
          let contentObj = content;
        
          if (contentObj === null) {
            contentObj = {};
            contentObj.src = this.items[i].dataset.large;
            contentObj.description = this.items[i].dataset.description;
          }
      
          if (!this.settings.hiddenElements.includes("counter")) {
            this.counter.innerHTML = `
                <span class="asyncGallery__Current">${this.index + 1}</span>${
              this.settings.counterDivider
            }<span class="asyncGallery__Current">${this.items.length}</span>
                `;
          }
      
          if (!this.addedItems.hasOwnProperty(i)) {
            let image = document.createElement("IMG");
      
            let galleryItem = document.createElement("DIV");
            galleryItem.classList.add("asyncGallery__Item");
      
            if (this.loading) {
              this.loader.classList.add("is-visible");
            }
      
            this.clearVisible();
      
            if (this.dotsVisible) {
              this.gallery
                .querySelector(`.asyncGallery__Dots li[data-index="${i}"]`)
                .classList.add("is-active");
            }
      
            image.src = contentObj.src;
            image.alt = "car";
          
          galleryItem.innerHTML = `
          <div class="asyncGallery__ItemImage">
            ${image.outerHTML}
          </div>
          `;
      
            this.gallery.append(galleryItem);
            this.addedItems[i] = galleryItem;
      
            image.addEventListener("load", () => {
              this.addedItems[i].loaded = true;
              if (!this.gallery.querySelector(".asyncGallery__Item.is-visible")) {
                this.addedItems[i].classList.add("is-visible");
              }
      
              if (this.loading) {
                this.loader.classList.remove("is-visible");
              }
            });
          } else {
            this.clearVisible();
            if (this.addedItems[this.index].loaded) {
              this.addedItems[this.index].classList.add("is-visible");
              if (this.loading) {
                this.loader.classList.remove("is-visible");
              }
            } else if (this.loading) {
              this.loader.classList.add("is-visible");
            }
      
            if (this.dotsVisible) {
              this.gallery
                .querySelector(`.asyncGallery__Dots li[data-index="${i}"]`)
                .classList.add("is-active");
            }
          }
      
          if (!this.settings.loop) {
            if (this.index === 0) this.prev.setAttribute("disabled", true);
            else this.prev.removeAttribute("disabled");
      
            if (this.index === this.items.length - 1)
              this.next.setAttribute("disabled", true);
            else this.next.removeAttribute("disabled");
          }
        }
      
        clearVisible() {
          if (this.gallery.querySelector(".asyncGallery__Item.is-visible")) {
            this.gallery
              .querySelector(".asyncGallery__Item.is-visible")
              .classList.remove("is-visible");
          }
      
          if (this.gallery.querySelector(".asyncGallery__Dots li.is-active")) {
            this.gallery
              .querySelector(".asyncGallery__Dots li.is-active")
              .classList.remove("is-active");
          }
        }
      
        closeGallery() {
          this.gallery.classList.remove("is-visible");
          this.clearVisible();
        }
      
        capitalizeFirstLetter(string) {
          return string.charAt(0).toUpperCase() + string.slice(1);
        }
      
        handleGesure() {
          if (this.touch.endX > this.touch.startX + 20) {
            this.getPrevious();
          } else if (this.touch.endX < this.touch.startX - 20) {
            this.getNext();
          }
        }
      
        getPrevious() {
          if (this.settings.loop) {
            this.index--;
            if (this.index === -1) {
              this.index = this.items.length - 1;
            }
            this.getItem(this.index);
          } else if (this.index > 0) {
            this.index--;
            this.getItem(this.index);
          }
        }
      
        getNext() {
          if (this.settings.loop) {
            this.index++;
            if (this.index === this.items.length) {
              this.index = 0;
            }
            this.getItem(this.index);
          } else if (this.index < this.items.length - 1) {
            this.index++;
            this.getItem(this.index);
          }
        }
      
        bindEvents() {
          this.items.forEach((item, i) => {
            item.addEventListener("click", e => {
              this.gallery.classList.add("is-visible");
              this.index = i;
              this.getItem(i, {
                src: e.target.dataset.large,
                description: e.target.dataset.description
              });
            });
          });
      
          document.addEventListener("keyup", e => {
            if (this.gallery.classList.contains("is-visible")) {
              if (e.key === "Escape") this.closeGallery();
              if (this.settings.keyboardNavigation) {
                if (e.keyCode === 39) this.getNext();
                else if (e.keyCode === 37) this.getPrevious();
              }
            }
          });
      
          this.gallery.addEventListener(
            "touchstart",
            e => {
              this.touch.startX = e.changedTouches[0].screenX;
            },
            false
          );
      
          this.gallery.addEventListener(
            "touchend",
            e => {
              this.touch.endX = e.changedTouches[0].screenX;
              this.handleGesure();
            },
            false
          );
        }
      }
      
      new AsyncGallery();
      
    </script>
      

    <div class="col-md-6 col-sm-12">

      <div class="informations-right">
        <h2>Subaru LEVORG VN5 из Японии</h2>
  
        <div class="types-prices">
          <h3 class="price-in-rubles">~ 1 519 000 ₽</h3>
  
          <div class="d-flex other-price">
  
            <div class="d-flex flex-column">
              <span class="title-price-in-yen">Цена в Японии</span>
              <span class="title-duty-price">Полная пошлина</span>
            </div>
    
            <div class="d-flex flex-column">
              <p class="price-in-yen">493 000 ¥</p>
              <p class="duty-price">~ 946 000 ₽</p>
            </div>
          </div>
  
          <div class="d-flex buttons-car-card">
            <button type="button" class="btn general-button" data-bs-toggle="modal" data-bs-target="#exampleModal">
              Оставить заявку
            </button>
            <button id="calculation-button" type="button" class="btn general-button" data-bs-toggle="modal" data-bs-target="#exampleModal">
              Подробный расчёт
            </button>
          </div>
        </div>
  
        <div class="row info-car">
          <div class="col-6 col-info-car">
            
            <div class="d-flex">
              <div class="car-info-value">
                <p>Тип КПП</p>
              </div>
              
              <p class="car-value">Вариатор</p>
              
            </div>
  
            <div class="d-flex">
              <div class="car-info-value">
                <p>Цвет</p>
              </div>
              
              <p class="car-value">Серый</p>
              
            </div>
  
            <div class="d-flex">
              <div class="car-info-value">
                <p>Тип топлива</p>
              </div>
              
              <p class="car-value">Бензин</p>
              
            </div>
  
            <div class="d-flex">
              <div class="car-info-value">
                <p>Объём двигателя</p>
              </div>
              
              <p class="car-value">1.6 л</p>
              
            </div>
          </div>
          
          <div class="col-6 col-info-car">
            
            <div class="d-flex">
              <div class="car-info-value">
                <p>Марка авто</p>
              </div>
              
              <p class="car-value">Subaru</p>
              
            </div>
  
            <div class="d-flex">
              <div class="car-info-value">
                <p>Модель авто</p>
              </div>
              
              <p class="car-value">LEVORG</p>
              
            </div>
  
            <div class="d-flex">
              <div class="car-info-value">
                <p>Год</p>
              </div>
              
              <p class="car-value">2017</p>
              
            </div>
  
            <div class="d-flex">
              <div class="car-info-value">
                <p>Пробег</p>
              </div>
              
              <p class="car-value">77 000 км</p>
              
            </div>
          </div>
        </div>
  
        <div class="overview-description">
          Стоимость является ориентировочной, включая все расходы в г. Владивосток.
          Расчёт может быть некорректным.
          Обратитесь к нам, оставив заявку, чтобы получить консультацию.
        </div>
      </div>
    </div>
  </div>
</section>

{% include 'templates/similar_cars.html' %}
{% include 'templates/shipping_calculator.html' %}
{% include 'templates/feedback_form.html' %}

<script>
  window.onload = (function () {
    let mainSlides = document.querySelectorAll(".main-slides > .gallery-slide");
    let thumbnailSlidesParent = document.querySelector(".thumbnail-slides");
    let mainSlidesCount = mainSlides.length;
    let actionButtons = document.querySelectorAll(
      ".main-slides > .slider-controller-button"
    );
    let slidesCount = document.querySelector(".all-slides-count");
    let slideCountCurr = document.querySelector(".curr-slide-count");
    let previousSlideButton = document.querySelector(".previous-slide-button");
    let nextSlideButton = document.querySelector(".next-slide-button");

    // ### Initializing the slider ###
    (function () {
      if (mainSlidesCount >= 2) {
        slideCountCurr.innerText = 1;
        slidesCount.innerText = mainSlidesCount;
        initializeThumbnailSlides();
        actionButtons.forEach(function (currButton) {
          currButton.style.display = "block";
        });
      }
    })();

    // Creates and attaches bottom thumbnail images for main slides
    function initializeThumbnailSlides() {
      for (let i = 0; i < mainSlidesCount; i++) {
        var createImage = document.createElement("img");
        createImage.src = mainSlides[i].src;
        createImage.classList = mainSlides[i].classList;
        createImage.classList.remove("gallery-slide");
        createImage.classList += " gallery-slide-thumbnail";
        createImage.width = 96;
        createImage.height = 90;
        thumbnailSlidesParent.appendChild(createImage);
      }
    }
    // ### THE END OF ### Initializing the slider

    // Determining current displaying image position in `mainSlides` array
    function currSliderImagePos() {
      for (let i = 0; i < mainSlides.length; i++) {
        if (
          window.getComputedStyle(mainSlides[i]).display !== "none" &&
          typeof mainSlides[i] !== "undefined"
        ) {
          return i;
        }
      }
      return false;
    }

    // Determining previous displaying image position in `mainSlides` array
    function prevSliderImagePos(pos) {
      if (pos >= 0 && typeof mainSlides[pos - 1] !== "undefined") {
        return pos - 1;
      }
      return false;
    }

    // Determining next displaying image position in `mainSlides` array
    function nextSliderImagePos(pos) {
      if (pos >= 0 && typeof mainSlides[pos + 1] !== "undefined") {
        return pos + 1;
      }
      return false;
    }

    function hideSlide(currSlide, duration) {
      thumbnailSlides[currSlide].style.border = "none";
      // mainSlides[currSlide].style.opacity = 0;
      mainSlides[currSlide].style.display = "none";
      setTimeout(function () {}, duration);
    }

    function showSlide(nextSlide, duration) {
      // mainSlides[nextSlide].style.opacity = 1;
      mainSlides[nextSlide].style.display = "block";
      setTimeout(function () {}, duration);
    }

    let thumbnailSlides = document.querySelectorAll(
      ".thumbnail-slides > .gallery-slide-thumbnail"
    );

    nextSlideButton.addEventListener("click", function () {
      let currentSliderImage = currSliderImagePos();
      let nextSliderImage = nextSliderImagePos(currentSliderImage);
      let imageTransitionDuration =
        window
          .getComputedStyle(mainSlides[currentSliderImage])
          .transitionDuration.replace("s", "") * 1000;

      if (currentSliderImage !== false && nextSliderImage !== false) {
        hideSlide(currentSliderImage, imageTransitionDuration);
      }

      if (nextSliderImage !== false) {
        slideCountCurr.innerText =
          nextSliderImage <= mainSlides.length
            ? nextSliderImage + 1
            : mainSlides.length;
        showSlide(nextSliderImage, imageTransitionDuration);
      }
    });

    previousSlideButton.addEventListener("click", function () {
      let currentSliderImage = currSliderImagePos();
      let prevSliderImage = prevSliderImagePos(currentSliderImage);
      let imageTransitionDuration =
        window
          .getComputedStyle(mainSlides[currentSliderImage])
          .transitionDuration.replace("s", "") * 1000;

      if (currentSliderImage !== false && prevSliderImage !== false) {
        hideSlide(currentSliderImage, imageTransitionDuration);
      }

      if (prevSliderImage !== false) {
        slideCountCurr.innerText =
          prevSliderImage <= mainSlides.length
            ? currentSliderImage
            : mainSlides.length;
        showSlide(prevSliderImage, imageTransitionDuration);
      }
    });

    let changeSlide = document.querySelector(".thumbnail-slides");

    changeSlide.addEventListener("click", function (e) {
      if (e.target.tagName === "IMG") {
        let clickedImagePos = Array.prototype.indexOf.call(
          e.currentTarget.children,
          e.target
        );
        let currentSliderImage = currSliderImagePos();
        let imageTransitionDuration =
          window
            .getComputedStyle(mainSlides[0])
            .transitionDuration.replace("s", "") * 1000;

        if (currentSliderImage !== false) {
          hideSlide(currentSliderImage, imageTransitionDuration);
        }

        if (clickedImagePos >= 0) {
          slideCountCurr.innerText =
            currentSliderImage <= mainSlides.length
              ? clickedImagePos + 1
              : mainSlides.length;
          showSlide(clickedImagePos, imageTransitionDuration);
        }
      }
    });
  })();
</script>


<script>
	function rm_bad_img(original_img) {
		var img = new Image();
		img.onload = function() {
			if (img.width === 1 && img.height === 1) {
				original_img.classList.add("INCORRECT");
				original_img.style.display = "none";
			}
		};
		img.src = original_img.src;
	}
	
	document.querySelectorAll('.gallery__Image').forEach(function(original_img) {
		rm_bad_img(original_img)
	});    
</script>


{% endblock %}
